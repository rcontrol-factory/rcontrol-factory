<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>RControl Factory</title>

  <meta name="theme-color" content="#0b1020" />

  <!-- mantém do jeito que teu deploy já usa -->
  <link rel="manifest" href="/manifest.json" />
  <link rel="stylesheet" href="/styles.css" />
</head>

<body>
  <noscript>Ative o JavaScript para usar o app.</noscript>

  <div id="app">
    <div style="padding:14px;font-family:system-ui">Carregando…</div>
  </div>

  <script>
    (function () {
      function rcfLog(msg) {
        try {
          if (window.RCF_LOGGER && typeof window.RCF_LOGGER.push === "function") {
            window.RCF_LOGGER.push("boot", msg);
          } else {
            console.log("[BOOT]", msg);
          }
        } catch {}
      }

      function loadScript(src) {
        return new Promise((resolve, reject) => {
          const s = document.createElement("script");
          s.src = src;
          s.async = false; // mantém ordem
          s.onload = () => resolve(src);
          s.onerror = () => reject(new Error("fail: " + src));
          document.head.appendChild(s);
        });
      }

      async function boot() {
        rcfLog("index boot: start");

        // ✅ carrega somente o app principal
        // (NÃO registra SW aqui — deixa o app.js cuidar disso)
        try {
          const ok = await loadScript("/app.js");
          rcfLog("app.js loaded ✅ " + ok);
        } catch (e) {
          rcfLog("app.js missing ❌ /app.js");
        }
      }

      boot();
    })();
  </script>
</body>
</html>
